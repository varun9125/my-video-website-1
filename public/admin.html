<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KamaBaba Admin Upload</title>

<style>
:root{
 --bg:#000;
 --card:#141414;
 --accent:#ff0055;
 --soft:#888;
}

*{box-sizing:border-box}

body{
 margin:0;
 background:var(--bg);
 color:#fff;
 font-family:system-ui,-apple-system,Segoe UI;
}

.box{
 max-width:420px;
 margin:40px auto;
 background:var(--card);
 padding:22px;
 border-radius:14px;
 box-shadow:0 0 30px rgba(255,0,85,.25);
}

h2{
 text-align:center;
 margin:0 0 20px;
 color:var(--accent);
 letter-spacing:.5px;
}

input,button{
 width:100%;
 padding:12px;
 margin-top:12px;
 border-radius:10px;
 border:none;
 font-size:15px;
}

input{
 background:#1c1c1c;
 color:#fff;
 outline:none;
}

button{
 background:var(--accent);
 color:#fff;
 font-weight:700;
 cursor:pointer;
}

button:disabled{
 opacity:.6;
 cursor:not-allowed;
}

#msg{
 margin-top:14px;
 min-height:22px;
 font-size:14px;
 text-align:center;
 color:#ccc;
}

.preview{
 margin-top:15px;
 font-size:13px;
 background:#0e0e0e;
 padding:10px;
 border-radius:10px;
 color:#aaa;
}
.preview b{color:#fff}
</style>
</head>

<body>

<div class="box">
  <h2>üîê Admin Upload</h2>

  <input type="password" id="password" placeholder="Admin Password">
  <input type="text" id="title" placeholder="Video title">
  <input type="file" id="video" accept="video/*">

  <button id="btn" onclick="upload()">üöÄ Upload Video</button>

  <div class="preview" id="preview" style="display:none"></div>

  <div id="msg"></div>
</div>

<script>
/* =========================
   AUTO CATEGORY / TAG / SEO
========================= */

function autoCategory(title){
 title=title.toLowerCase();
 if(title.includes("desi")||title.includes("indian")) return "desi";
 if(title.includes("couple")||title.includes("bf")||title.includes("gf")) return "couple";
 if(title.includes("viral")||title.includes("trending")) return "viral";
 if(title.includes("hot")||title.includes("sexy")||title.includes("xxx")) return "hot";
 return "other";
}

function autoTags(title){
 const words=title.toLowerCase()
  .replace(/[^a-z0-9 ]/g,"")
  .split(" ")
  .filter(w=>w.length>3);

 const base=[
  "adult video","18+ video","viral sexvideo",
  "hot sexvideo","desi sex video"
 ];

 return [...new Set([...words,...base])].slice(0,12).join(", ");
}

function autoSEO(title){
 return{
  seoTitle: title+" | KamaBaba Viral Videos",
  seoDesc: "Watch "+title+" full HD. Desi hot viral adult videos only on KamaBaba.",
  seoKeywords: autoTags(title)
 };
}

/* =========================
        UPLOAD
========================= */

async function upload(){
 const msg=document.getElementById("msg");
 const btn=document.getElementById("btn");
 const preview=document.getElementById("preview");

 const password=document.getElementById("password").value.trim();
 const title=document.getElementById("title").value.trim();
 const file=document.getElementById("video").files[0];

 if(!password){msg.innerText="‚ùå Admin password required";return;}
 if(!file){msg.innerText="‚ùå Please select a video file";return;}

 // AUTO DATA
 const category=autoCategory(title);
 const tags=autoTags(title);
 const seo=autoSEO(title);

 preview.style.display="block";
 preview.innerHTML=`
  <b>Auto Category:</b> ${category}<br>
  <b>Auto Tags:</b> ${tags}<br>
  <b>SEO Title:</b> ${seo.seoTitle}
 `;

 btn.disabled=true;
 msg.innerText="‚è≥ Uploading‚Ä¶ please wait";

 const fd=new FormData();
 fd.append("video",file);
 fd.append("title",title||"Untitled");
 fd.append("category",category);
 fd.append("tags",tags);
 fd.append("seoTitle",seo.seoTitle);
 fd.append("seoDesc",seo.seoDesc);
 fd.append("seoKeywords",seo.seoKeywords);

 try{
  const res=await fetch("/api/upload",{
   method:"POST",
   headers:{ "x-admin-password": password },
   body:fd
  });

  const data=await res.json();

  if(data.success){
   msg.innerText="‚úÖ Upload successful";
   document.getElementById("video").value="";
   document.getElementById("title").value="";
  }else{
   msg.innerText="‚ùå "+(data.error||"Upload failed");
  }
 }catch(e){
  msg.innerText="‚ùå Network / server error";
 }

 btn.disabled=false;
}
</script>

</body>
</html>
