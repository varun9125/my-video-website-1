<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>KamaBaba Viral Videos | Trending Adult Shorts</title>

<meta name="description" content="Trending viral adult short videos. 18+ only.">
<meta name="robots" content="index, follow">

<style>
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  font-family:system-ui,Arial;
}

/* ===== HEADER ===== */
header{
  background:#111;
  padding:12px;
  position:sticky;
  top:0;
  z-index:9;
}
header h1{
  margin:0;
  text-align:center;
  font-size:18px;
}
#search{
  width:100%;
  margin-top:8px;
  padding:10px;
  border-radius:8px;
  border:none;
  font-size:14px;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(170px,1fr));
  gap:12px;
  padding:12px;
}

/* 16:9 VIDEO CARD */
.card{
  cursor:pointer;
}
.video-box{
  position:relative;
  width:100%;
  padding-top:56.25%; /* 16:9 */
  background:#000;
  border-radius:10px;
  overflow:hidden;
}
.video-box video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
}

/* PLAY ICON */
.video-box::after{
  content:"â–¶";
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:36px;
  color:rgba(255,255,255,.85);
  pointer-events:none;
}

.card p{
  font-size:13px;
  margin:6px 4px 0;
  text-align:center;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ===== PAGINATION ===== */
.pagination{
  text-align:center;
  padding:15px;
}
.pagination button{
  margin:4px;
  padding:7px 12px;
  border:none;
  border-radius:6px;
  background:#222;
  color:#fff;
  cursor:pointer;
}
.pagination button.active{
  background:#ff0055;
}
</style>
</head>

<body>

<header>
  <h1>ðŸ”¥ KamaBaba Viral Videos ðŸ”¥</h1>
  <input id="search" placeholder="Search videos...">
</header>

<main class="grid" id="grid"></main>
<div class="pagination" id="pagination"></div>

<script>
let allVideos=[];
let currentPage=1;
const perPage=10;   // âœ… 10 VIDEOS PER PAGE
let keyword="";

/* FETCH VIDEOS */
fetch("/api/videos")
.then(r=>r.json())
.then(d=>{
  allVideos=d.reverse(); // latest first
  render();
});

/* RENDER */
function render(){
  const grid=document.getElementById("grid");
  const pagination=document.getElementById("pagination");
  grid.innerHTML="";
  pagination.innerHTML="";

  const filtered=allVideos.filter(v =>
    v.title.toLowerCase().includes(keyword)
  );

  const totalPages=Math.ceil(filtered.length/perPage);
  const start=(currentPage-1)*perPage;
  const pageVideos=filtered.slice(start,start+perPage);

  pageVideos.forEach(v=>{
    const card=document.createElement("div");
    card.className="card";

    card.innerHTML=`
      <div class="video-box">
        <video 
          src="${v.url}#t=1"
          muted
          preload="metadata"
          playsinline>
        </video>
      </div>
      <p>${v.title}</p>
    `;

    card.onclick=()=>location.href="/watch?id="+v._id;
    grid.appendChild(card);
  });

  /* PAGINATION BUTTONS */
  for(let i=1;i<=totalPages;i++){
    const btn=document.createElement("button");
    btn.innerText=i;
    if(i===currentPage) btn.classList.add("active");
    btn.onclick=()=>{
      currentPage=i;
      render();
      scrollTo(0,0);
    };
    pagination.appendChild(btn);
  }
}

/* SEARCH */
document.getElementById("search").oninput=e=>{
  keyword=e.target.value.toLowerCase();
  currentPage=1;
  render();
};
</script>

</body>
</html>

