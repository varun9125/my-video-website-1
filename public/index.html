<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>KamaBaba Viral Videos | Adult Desi Viral Clips</title>
<meta name="description" content="Watch trending desi viral adult videos on KamaBaba Viral." />
<meta name="robots" content="index, follow" />
<link rel="icon" href="/favicon.ico" />
<meta name="theme-color" content="#000000" />

<style>
:root{
 --bg:#0b0b0b;
 --card:#141414;
 --accent:#ff0055;
 --soft:#888;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#fff;font-family:system-ui}

/* AGE NOTICE (NON BLOCKING) */
#ageNotice{
 background:#111;
 padding:10px;
 text-align:center;
 font-size:13px;
 border-bottom:1px solid #222;
}
#ageNotice button{
 margin-left:10px;
 padding:4px 10px;
 border:none;
 border-radius:6px;
 background:#ff0055;
 color:#fff;
 cursor:pointer;
}

/* HEADER */
header{
 position:sticky;top:0;z-index:10;
 background:#111;padding:10px 14px;border-bottom:1px solid #222
}
.topbar{
 display:flex;align-items:center;justify-content:space-between;gap:10px
}
.brand{
 display:flex;align-items:center;gap:10px;
 font-weight:800;font-size:18px
}
.brand img{height:36px}
.search-icon{font-size:20px;cursor:pointer}
#search{
 width:100%;margin-top:10px;padding:12px;border-radius:10px;
 border:none;background:#1a1a1a;color:#fff;display:none
}

/* TAGS */
.tags{display:flex;gap:8px;overflow-x:auto;margin-top:10px}
.tags button{
 padding:6px 14px;border:none;border-radius:20px;
 background:#1f1f1f;color:#fff;font-size:13px;cursor:pointer
}
.tags button.active{background:var(--accent)}

/* GRID */
.grid{
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:16px;
 padding:14px;
 max-width:720px;
 margin:0 auto;
}
.card{background:var(--card);border-radius:12px;overflow:hidden;cursor:pointer}
.thumb{aspect-ratio:16/9;background:#000;position:relative}
.thumb img{width:100%;height:100%;object-fit:cover}
.duration{
 position:absolute;right:8px;bottom:8px;
 background:rgba(0,0,0,.75);padding:3px 6px;
 font-size:11px;border-radius:4px
}
.info{padding:10px}
.title{font-size:14px;font-weight:600}
.views{font-size:12px;color:var(--soft)}

/* FOOTER */
footer{
 max-width:720px;
 margin:30px auto;
 padding:14px;
 text-align:center;
 font-size:13px;
 color:#aaa;
 border-top:1px solid #222;
}
footer a{color:#aaa;margin:0 6px;text-decoration:none}
footer a:hover{color:#fff}
</style>
</head>

<body>

<div id="ageNotice">
 This website contains adult content. 18+ only.
 <button onclick="this.parentElement.remove()">I am 18+</button>
</div>

<header>
 <div class="topbar">
  <div class="brand">
   <img src="/logo.png">
   <span>KamaBaba Viral</span>
  </div>
  <div class="search-icon" onclick="toggleSearch()">üîç</div>
 </div>

 <input id="search" placeholder="Search videos...">

 <div class="tags">
  <button class="active" onclick="setTag('')">All</button>
  <button onclick="setTag('hot')">üî• Hot</button>
  <button onclick="setTag('desi')">üáÆüá≥ Desi</button>
  <button onclick="setTag('viral')">üöÄ Viral</button>
  <button onclick="setTag('new')">üÜï New</button>
 </div>
</header>

<div class="grid" id="grid"></div>
<div id="pagination" style="text-align:center;padding:20px"></div>

<footer>
 ¬© 2025 KamaBaba Viral  
 <br><br>
 <a href="/privacy-policy">Privacy Policy</a> |
 <a href="/terms">Terms</a> |
 <a href="/dmca">DMCA</a> |
 <a href="/contact">Contact</a>
</footer>

<script>
const grid=document.getElementById("grid");
const pagination=document.getElementById("pagination");
const searchInput=document.getElementById("search");

let allVideos=[],page=1,tag="";
const perPage=8;

function toggleSearch(){
 searchInput.style.display=
  searchInput.style.display==="block"?"none":"block";
 searchInput.focus();
}

function setTag(t){
 tag=t;page=1;
 document.querySelectorAll(".tags button")
  .forEach(b=>b.classList.remove("active"));
 event.target.classList.add("active");
 draw();
}

function autoThumb(url){
 if(!url||!url.includes("/video/upload/")) return "/logo.png";
 return url.replace("/video/upload/","/video/upload/so_2/")
           .replace(/\.(mp4|mov|webm).*/i,".jpg");
}

fetch("/api/videos")
 .then(r=>r.json())
 .then(v=>{allVideos=Array.isArray(v)?v:[];draw()});

function draw(){
 const q=searchInput.value.toLowerCase();
 grid.innerHTML="";pagination.innerHTML="";
 let list=allVideos.filter(v=>{
  const t=v.title.toLowerCase();
  return t.includes(q)&&(!tag||t.includes(tag));
 });
 const total=Math.ceil(list.length/perPage);
 list.slice((page-1)*perPage,page*perPage).forEach(v=>{
  const thumb=v.thumbnail||autoThumb(v.url);
  grid.insertAdjacentHTML("beforeend",`
   <div class="card" onclick="location.href='/watch?id=${v._id}'">
    <div class="thumb">
     <img src="${thumb}">
     <div class="duration">Video</div>
    </div>
    <div class="info">
     <div class="title">${v.title}</div>
     <div class="views">üëÅ ${v.views||0}</div>
    </div>
   </div>
  `);
 });
 for(let i=1;i<=total;i++){
  pagination.insertAdjacentHTML("beforeend",
   `<button onclick="page=${i};draw()"
    style="margin:4px">${i}</button>`);
 }
}
searchInput.oninput=()=>{page=1;draw()};
</script>

</body>
</html>
