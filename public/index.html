<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- MOBILE -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ===== BASIC SEO ===== -->
<title>KamaBaba Viral Videos | Trending Adult Short Videos</title>

<meta name="description" content="Watch trending viral adult short videos on KamaBaba. Mobile friendly, fast loading, updated daily. 18+ only.">
<meta name="keywords" content="adult videos, viral videos, short videos, reels, hot videos, kamababa">
<meta name="robots" content="index, follow">

<!-- ADULT CONTENT SIGNAL -->
<meta name="rating" content="adult">

<!-- OPEN GRAPH -->
<meta property="og:title" content="KamaBaba Viral Videos">
<meta property="og:description" content="Trending viral adult short videos. 18+ only.">
<meta property="og:type" content="website">
<meta property="og:site_name" content="KamaBaba">

<style>
body {
  margin: 0;
  background: #0d0d0d;
  color: #fff;
  font-family: system-ui, Arial;
}

/* ===== AGE GATE ===== */
#ageGate{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.97);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.ageBox{
  background:#111;
  padding:25px;
  max-width:340px;
  border-radius:10px;
  text-align:center;
  box-shadow:0 0 25px #ff004f;
}

.ageBox h2{
  color:#ff3e6c;
  margin-bottom:10px;
}

.ageBox p{
  font-size:14px;
  color:#ccc;
}

.ageBtns{
  margin-top:20px;
  display:flex;
  gap:10px;
}

.ageBtns button{
  flex:1;
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
}

.ageBtns button:first-child{
  background:#0f9d58;
  color:#fff;
}

.ageBtns button:last-child{
  background:#333;
  color:#fff;
}

/* ===== HEADER ===== */
header {
  padding: 10px;
  background: #111;
  position: sticky;
  top: 0;
  z-index: 10;
}

header h1 {
  margin: 5px 0;
  text-align: center;
  font-size: 18px;
}

#search {
  width: 100%;
  padding: 8px;
  border-radius: 6px;
  border: none;
  margin-top: 8px;
  font-size: 14px;
}

/* ===== GRID ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
  padding: 12px;
}

.card {
  cursor: pointer;
}

.thumb {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 8px;
  background: #000;
}

.card p {
  font-size: 13px;
  margin: 6px 0 0;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== PAGINATION ===== */
.pagination {
  text-align: center;
  padding: 15px;
}

.pagination button {
  margin: 3px;
  padding: 6px 10px;
  background: #222;
  border: none;
  color: #fff;
  border-radius: 4px;
  cursor: pointer;
}

.pagination button.active {
  background: #0f9d58;
}
</style>
</head>

<body>

<!-- ðŸ”ž AGE GATE -->
<div id="ageGate">
  <div class="ageBox">
    <h2>ðŸ”ž Adult Content</h2>
    <p>This website contains adult material.<br>You must be 18+ to continue.</p>
    <div class="ageBtns">
      <button onclick="allowSite()">I am 18+</button>
      <button onclick="denySite()">No</button>
    </div>
  </div>
</div>

<header>
  <h1>ðŸ”¥ KamaBaba Viral Videos ðŸ”¥</h1>
  <input id="search" placeholder="Search video...">
</header>

<main class="grid" id="grid"></main>
<div class="pagination" id="pagination"></div>

<!-- ===== GLOBAL VIDEO SCHEMA (SEO BOOST) ===== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "KamaBaba Viral Videos",
  "url": "/",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>

<script>
/* ===== AGE GATE ===== */
if(localStorage.getItem("adultAllowed")==="yes"){
  document.getElementById("ageGate").style.display="none";
}
function allowSite(){
  localStorage.setItem("adultAllowed","yes");
  document.getElementById("ageGate").style.display="none";
}
function denySite(){
  location.href="https://www.google.com";
}

/* ===== VIDEO LOGIC ===== */
let allVideos = [];
let currentPage = 1;
const perPage = 6;
let keyword = "";

fetch("/api/videos")
  .then(res => res.json())
  .then(data => {
    allVideos = data;
    render();
  });

function render() {
  const grid = document.getElementById("grid");
  const pagination = document.getElementById("pagination");
  grid.innerHTML = "";
  pagination.innerHTML = "";

  const filtered = allVideos.filter(v =>
    v.title.toLowerCase().includes(keyword)
  );

  const totalPages = Math.ceil(filtered.length / perPage);
  const start = (currentPage - 1) * perPage;
  const pageVideos = filtered.slice(start, start + perPage);

  pageVideos.forEach(v => {
    const card = document.createElement("div");
    card.className = "card";

    /* ===== PER VIDEO SEO ===== */
    card.innerHTML = `
      <video
        class="thumb"
        src="${v.url}#t=1"
        muted
        preload="metadata"
        title="${v.title}"
      ></video>
      <p>${v.title}</p>

      <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "VideoObject",
        "name": "${v.title}",
        "contentUrl": "${v.url}",
        "uploadDate": "${v.createdAt || new Date().toISOString()}",
        "publisher": {
          "@type": "Organization",
          "name": "KamaBaba"
        }
      }
      </script>
    `;

    card.onclick = () => location.href = "/watch?id=" + v._id;
    grid.appendChild(card);
  });

  for (let i = 1; i <= totalPages; i++) {
    const btn = document.createElement("button");
    btn.innerText = i;
    if (i === currentPage) btn.classList.add("active");
    btn.onclick = () => {
      currentPage = i;
      render();
      scrollTo(0,0);
    };
    pagination.appendChild(btn);
  }
}

document.getElementById("search").oninput = e => {
  keyword = e.target.value.toLowerCase();
  currentPage = 1;
  render();
};
</script>

</body>
</html>
