<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KamaBaba Viral Videos | Adult Desi Viral Clips</title>
<meta name="description" content="Watch trending desi viral adult videos on KamaBaba Viral." />
<link rel="icon" href="/favicon.ico" />
<meta name="theme-color" content="#000000" />

<style>
body{margin:0;background:#0b0b0b;color:#fff;font-family:system-ui}
header{background:#111;padding:12px;border-bottom:1px solid #222}
.brand{display:flex;align-items:center;gap:10px;font-size:18px;font-weight:700}
.brand img{height:36px}
.tags{display:flex;gap:8px;overflow-x:auto;margin-top:10px}
.tags button{padding:6px 14px;border:none;border-radius:20px;background:#1f1f1f;color:#fff}
.tags button.active{background:#ff0055}

.grid{
 display:grid;
 grid-template-columns:repeat(2,1fr);
 gap:14px;
 padding:14px;
 max-width:720px;
 margin:auto
}
.card{background:#141414;border-radius:12px;overflow:hidden;cursor:pointer}
.card img{width:100%;aspect-ratio:16/9;object-fit:cover}
.info{padding:8px}
.title{font-size:14px;font-weight:600}
.views{font-size:12px;color:#aaa}

/* PAGINATION */
#pagination{
 text-align:center;
 padding:20px
}
#pagination button{
 margin:4px;
 padding:6px 12px;
 border:none;
 border-radius:6px;
 background:#1f1f1f;
 color:#fff;
 cursor:pointer
}
#pagination button.active{
 background:#ff0055
}

/* AGE GATE */
#ageGate{
 position:fixed;
 inset:0;
 background:rgba(0,0,0,.95);
 z-index:9999;
 display:flex;
 align-items:center;
 justify-content:center
}
.ageBox{
 background:#141414;
 padding:24px;
 border-radius:12px;
 text-align:center;
 max-width:320px
}
.ageBtns{display:flex;gap:10px;margin-top:16px}
.ageBtns button{
 flex:1;
 padding:10px;
 border:none;
 border-radius:8px;
 font-weight:600;
 cursor:pointer
}
.yes{background:#0f9d58;color:#fff}
.no{background:#333;color:#fff}

footer{
 max-width:720px;
 margin:30px auto;
 padding:14px;
 text-align:center;
 font-size:13px;
 color:#aaa;
 border-top:1px solid #222;
}
footer a{color:#aaa;margin:0 6px;text-decoration:none}
</style>
</head>

<body>

<!-- AGE GATE POPUP -->
<div id="ageGate">
 <div class="ageBox">
  <h2>üîû Adult Content</h2>
  <p>You must be 18+ to continue</p>
  <div class="ageBtns">
   <button class="yes" onclick="allow()">I am 18+</button>
   <button class="no" onclick="deny()">Exit</button>
  </div>
 </div>
</div>

<header>
 <div class="brand">
  <img src="/logo.png">
  <span>KamaBaba Viral</span>
 </div>
 <div class="tags">
  <button class="active">All</button>
  <button>Hot</button>
  <button>Desi</button>
  <button>Viral</button>
 </div>
</header>

<div class="grid" id="grid"></div>

<div id="pagination"></div>

<footer>
 ¬© 2025 KamaBaba Viral<br><br>
 <a href="/privacy-policy.html">Privacy Policy</a> |
 <a href="/terms.html">Terms</a> |
 <a href="/dmca.html">DMCA</a> |
 <a href="/contact.html">Contact</a>
</footer>

<script>
/* AGE GATE */
if(localStorage.adult==="yes"){
 document.getElementById("ageGate").style.display="none";
}
function allow(){
 localStorage.adult="yes";
 document.getElementById("ageGate").style.display="none";
}
function deny(){
 location.href="https://google.com";
}

/* PAGINATION + THUMB FIX */
const grid=document.getElementById("grid");
const pagination=document.getElementById("pagination");

let allVideos=[],page=1;
const perPage=8;

/* AUTO THUMB FOR OLD VIDEOS */
function getThumb(v){
 if(v.thumbnail && v.thumbnail.trim()!=="") return v.thumbnail;
 if(!v.url || !v.url.includes("/video/upload/")) return "/logo.png";
 return v.url
  .replace("/video/upload/","/video/upload/so_2/")
  .replace(/\.(mp4|mov|webm).*/i,".jpg");
}

fetch("/api/videos")
.then(r=>r.json())
.then(vs=>{
 allVideos=Array.isArray(vs)?vs:[];
 draw();
});

function draw(){
 grid.innerHTML="";
 pagination.innerHTML="";

 const total=Math.ceil(allVideos.length/perPage);
 const start=(page-1)*perPage;
 const end=start+perPage;

 allVideos.slice(start,end).forEach(v=>{
  const d=document.createElement("div");
  d.className="card";
  d.innerHTML=`
   <img src="${getThumb(v)}">
   <div class="info">
    <div class="title">${v.title}</div>
    <div class="views">üëÅ ${v.views||0}</div>
   </div>`;
  d.onclick=()=>location.href="/watch?id="+v._id;
  grid.appendChild(d);
 });

 for(let i=1;i<=total;i++){
  const b=document.createElement("button");
  b.innerText=i;
  if(i===page) b.className="active";
  b.onclick=()=>{
   page=i;
   draw();
   window.scrollTo({top:0,behavior:"smooth"});
  };
  pagination.appendChild(b);
 }
}
</script>

</body>
</html>
