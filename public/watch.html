<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Watch Video</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:system-ui}
.player{width:100%;max-height:60vh;background:#000}
.info{padding:12px}
</style>
</head>

<body>

<video
  id="player"
  class="player"
  controls
  autoplay
  muted
  playsinline>
</video>

<div class="info">
  <h3 id="title">Loadingâ€¦</h3>
</div>

<script>
const id = new URLSearchParams(location.search).get("id");

fetch("/api/videos")
.then(r=>r.json())
.then(videos=>{
  const v = videos.find(x => x.id == id);
  if(!v){
    document.getElementById("title").innerText = "Video not found";
    return;
  }

  document.getElementById("title").innerText = v.title;

  const video = document.getElementById("player");
  video.src = v.url;
  video.load();
});
</script>

</body>
</html>
