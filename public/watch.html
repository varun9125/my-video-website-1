<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Watch Video | KamaBaba Viral</title>

<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#000000">

<link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">
<script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>

<style>
body{margin:0;background:#000;color:#fff;font-family:system-ui}
.topLogo{text-align:center;padding:10px;border-bottom:1px solid #222}
.topLogo img{height:36px}
.playerWrap{width:100%;aspect-ratio:16/9}
.video-js{width:100%;height:100%}
.info{padding:12px}
.meta{font-size:13px;color:#aaa}
.actions button{margin-right:8px;padding:8px 14px;border:none;border-radius:8px;background:#1c1c1c;color:#fff}
#related{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;padding:12px}
.card{background:#111;border-radius:8px;overflow:hidden}
.card img{width:100%;aspect-ratio:16/9;object-fit:cover}
.card p{margin:6px;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
footer{border-top:1px solid #222;padding:14px;text-align:center;font-size:13px;color:#aaa}
footer a{color:#aaa;margin:0 6px;text-decoration:none}
</style>
</head>

<body>

<div style="background:#111;padding:8px;text-align:center;font-size:13px">
Adult content. 18+ only.
<button onclick="this.parentElement.remove()">I am 18+</button>
</div>

<div class="topLogo">
 <img src="/logo.png">
</div>

<div class="playerWrap">
 <video id="player" class="video-js" controls></video>
</div>

<div class="info">
 <h3 id="title">Loading‚Ä¶</h3>
 <div class="meta">üëÅ <span id="views">0</span> ¬∑ üëç <span id="likes">0</span></div>
 <div class="actions">
  <button onclick="like()">üëç Like</button>
  <button onclick="share()">üîó Share</button>
 </div>
</div>

<h3 style="padding-left:12px">Related Videos</h3>
<div id="related"></div>

<footer>
 <a href="/privacy-policy.html">Privacy Policy</a> |
 <a href="/terms.html">Terms</a> |
 <a href="/dmca.html">DMCA</a> |
 <a href="/contact.html">Contact</a>
</footer>

<script>
const id=new URLSearchParams(location.search).get("id");
const player=videojs("player");
const titleEl=document.getElementById("title");
const viewsEl=document.getElementById("views");
const likesEl=document.getElementById("likes");
const related=document.getElementById("related");

fetch("/api/videos").then(r=>r.json()).then(vs=>{
 const v=vs.find(x=>x._id===id);
 if(!v)return;
 titleEl.innerText=v.title;
 viewsEl.innerText=v.views||0;
 likesEl.innerText=v.likes||0;
 player.src({src:v.url,type:"video/mp4"});

 vs.filter(x=>x._id!==id).slice(0,8).forEach(r=>{
  const c=document.createElement("div");
  c.className="card";
  c.innerHTML=`<img src="${r.thumbnail||'/logo.png'}"><p>${r.title}</p>`;
  c.onclick=()=>location.href="/watch?id="+r._id;
  related.appendChild(c);
 });
});

function like(){likesEl.innerText++}
function share(){
 navigator.clipboard.writeText(location.href);
 alert("Link copied");
}
</script>

</body>
</html>
