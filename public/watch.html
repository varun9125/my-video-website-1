<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Watch</title>

<style>
body{margin:0;background:#000;color:#fff;font-family:system-ui}
video{width:100%}
.box{padding:10px}
.actions button{margin-right:10px}
.comment{background:#111;padding:6px;margin-top:6px;border-radius:6px}
.related{display:flex;gap:10px;margin-top:12px;overflow-x:auto}
.related img{width:120px;border-radius:6px}
</style>
</head>

<body>

<video id="player" controls></video>

<div class="box">
<h3 id="title"></h3>
<p id="views"></p>

<div class="actions">
<button onclick="like()">ğŸ‘ Like</button>
<button onclick="dislike()">ğŸ‘ Dislike</button>
</div>

<h4>Comments</h4>
<input id="cmt" placeholder="Write comment">
<button onclick="comment()">Post</button>
<div id="comments"></div>

<h4>Related Videos</h4>
<div class="related" id="related"></div>
</div>

<script>
const id=new URLSearchParams(location.search).get("id");

fetch("/video/"+id)
.then(r=>r.json())
.then(v=>{
  player.src=v.url;
  title.innerText=v.title;
  views.innerText="ğŸ‘ "+v.views;
  v.comments.forEach(c=>{
    comments.innerHTML+=`<div class="comment">${c}</div>`;
  });
});

function like(){ fetch("/like/"+id,{method:"POST"}); }
function dislike(){ fetch("/dislike/"+id,{method:"POST"}); }
function comment(){
  fetch("/comment/"+id,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({text:cmt.value})
  }).then(()=>location.reload());
}
</script>

</body>
</html>
